{"version":3,"sources":["store/calculatorSlice.tsx","contexts/ButtonConfig.tsx","contexts/EnumType.ts","page/Calculator/index.tsx","page/Calculator/HistoryList.tsx","components/Message.tsx","styled/Container.tsx","App.tsx","store/rootReducer.ts","store/index.tsx","components/Footer.tsx","index.tsx","store/hook/index.ts"],"names":["calculatorSlice","createSlice","name","initialState","darkTheme","history","reducers","changeTheme","state","saveExpression","action","current","length","pop","unshift","payload","cleanExpression","clickExpressionItem","temp","splice","actions","BTN_ACTIONS","ADD","DELETE","CLEAN","CALC","Btns","display","keydown","ariaLabel","control","operation","size","equals","CopyScope","Calculator","dispatch","useAppDispatch","useAppSelector","calculator","useState","OpenHistoryList","setOpenHistoryList","setCurrent","previous","setPrevious","isCopied","setIsCopied","appendValue","value","lastText","slice","prev","handleDelete","handleAllClear","handleReplaceText","expression","tempCurrent","includes","replace","sliceTempCurrent","isNaN","Number","String","newPrevious","total","eval","toString","btnClick","btnItem","handleKeyDown","event","checkKeyDownBtn","findIndex","item","key","useEffect","window","addEventListener","removeEventListener","copyTextToClipboard","text","navigator","clipboard","writeText","then","setTimeout","catch","err","console","log","handleCopy","scope","Previous","Current","className","onClick","undefined","map","index","gridSpan","data","HistoryList","CloseHistoryList","show","e","stopPropagation","idx","CreateExpression","Message","id","Container","styled","div","Tool","ThemeButton","Screen","ExpressionHover","ButtonContainer","Button","button","HistoryContainer","props","HistoryBlock","HistoryItem","App","document","body","classList","add","remove","rootReducer","combineReducers","calculatorReducer","persistConfig","storage","whitelist","persistedReducer","persistReducer","store","configureStore","reducer","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","Footer","href","container","getElementById","root","createRoot","persistor","persistStore","render","loading","useDispatch","useSelector"],"mappings":"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","file":"static/js/main.7135614f.chunk.js","sourcesContent":["import { createSlice, current } from \"@reduxjs/toolkit\";\n\nconst initialState: stateType = {\n  darkTheme: false,\n  history: [] as historyType[],\n};\n\nexport const calculatorSlice = createSlice({\n  name: \"calculator\",\n  initialState,\n  reducers: {\n    changeTheme: (state) => {\n      state.darkTheme = !state.darkTheme;\n    },\n    saveExpression: (state, action) => {\n      // redux current 拷貝\n      if (current(state.history).length > 10) {\n        state.history.pop();\n      }\n      state.history.unshift(action.payload);\n    },\n    cleanExpression: (state) => {\n      state.history = [];\n    },\n    clickExpressionItem: (state, { payload }) => {\n      const temp = current(state.history)[payload];\n\n      state.history.splice(payload, 1);\n      state.history.unshift(temp);\n    }\n  },\n});\n\nexport const { changeTheme, saveExpression, cleanExpression, clickExpressionItem } = calculatorSlice.actions;\nexport default calculatorSlice.reducer;\n","import { GoOn } from \"@icon-park/react\";\n\nexport const BTN_ACTIONS = {\n  ADD: \"ADD\",\n  DELETE: \"DELETE\",\n  CLEAN: \"CLEAN\",\n  CALC: \"CALC\",\n};\n\nexport const Btns: BtnType[] = [\n  {\n    display: \"C\",\n    keydown: \"Delete\",\n    action: BTN_ACTIONS.CLEAN,\n    ariaLabel: \"clean\",\n    control: true,\n  },\n  {\n    display: \"(\",\n    keydown: \"(\",\n    action: BTN_ACTIONS.ADD,\n    control: true,\n  },\n  {\n    display: \")\",\n    keydown: \")\",\n    action: BTN_ACTIONS.ADD,\n    control: true,\n  },\n  {\n    display: \"÷\",\n    keydown: \"/\",\n    action: BTN_ACTIONS.ADD,\n    operation: true,\n  },\n  {\n    display: \"7\",\n    keydown: \"7\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"8\",\n    keydown: \"8\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"9\",\n    keydown: \"9\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"x\",\n    keydown: \"*\",\n    action: BTN_ACTIONS.ADD,\n    operation: true,\n  },\n  {\n    display: \"4\",\n    keydown: \"4\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"5\",\n    keydown: \"5\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"6\",\n    keydown: \"6\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"+\",\n    keydown: \"+\",\n    action: BTN_ACTIONS.ADD,\n    operation: true,\n  },\n  {\n    display: \"1\",\n    keydown: \"1\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"2\",\n    keydown: \"2\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"3\",\n    keydown: \"3\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"-\",\n    keydown: \"-\",\n    action: BTN_ACTIONS.ADD,\n    operation: true,\n  },\n  {\n    display: <GoOn size=\"28px\" />,\n    keydown: \"Backspace\",\n    action: BTN_ACTIONS.DELETE,\n    ariaLabel: \"delete\",\n    control: true,\n  },\n  {\n    display: \"0\",\n    keydown: \"0\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \".\",\n    keydown: \".\",\n    action: BTN_ACTIONS.ADD,\n  },\n  {\n    display: \"=\",\n    keydown: \"Enter\",\n    action: BTN_ACTIONS.CALC,\n    equals: true,\n  },\n];\n","export enum CopyScope {\n  Previous = 0,\n  Current = 1,\n}","import { useEffect, useRef, useState } from \"react\";\nimport { Moon, SunOne, History, Copy } from \"@icon-park/react\";\nimport { useAppDispatch, useAppSelector } from \"../../store/hook\";\nimport { changeTheme, saveExpression } from \"../../store/calculatorSlice\";\n\nimport { Btns, BTN_ACTIONS } from \"../../contexts/ButtonConfig\";\nimport {\n  Container,\n  Screen,\n  Previous,\n  Current,\n  Button,\n  ButtonContainer,\n  Tool,\n  ThemeButton,\n} from \"../../styled/Container\";\nimport HistoryList from \"./HistoryList\";\nimport Message from \"../../components/Message\";\nimport { CopyScope } from \"../../contexts/EnumType\";\n\nexport default function Calculator() {\n  const dispatch = useAppDispatch();\n  const { darkTheme } = useAppSelector((state) => state.calculator);\n  const [OpenHistoryList, setOpenHistoryList] = useState<boolean>(false);\n\n  // 一個是數組，另一個數組存儲狀態的值\n  const [current, setCurrent] = useState<string>(\"\");\n  const [previous, setPrevious] = useState<string>(\"\");\n\n  // copy meg\n  const [isCopied, setIsCopied] = useState<boolean>(false);\n\n  const appendValue = (value: string) => {\n    // includes 判斷陣列是否包含特定的元素，並回傳 true 或 false\n    //在到達呼叫 return 的地方後，函式會立即停止\n\n    const lastText = current.slice(-1);\n    if (\n      (value === \".\" && lastText === \".\") ||\n      (value === \"+\" && lastText === \"+\") ||\n      (value === \"-\" && lastText === \"-\") ||\n      (value === \"x\" && lastText === \"x\") ||\n      (value === \"÷\" && lastText === \"÷\") ||\n      (lastText === \"+\" || lastText === \"-\") && (value === \"x\" || value === \"÷\")\n    )\n      return;\n\n    // 若沒有數字情況下點擊按鈕，需補 0 在前面\n    setCurrent((prev: string) => {\n      if (prev.length === 0 && (value === \".\" || value === \"+\" || value === \"-\" || value === \"x\" || value === \"÷\")) {\n        return 0 + value;\n      } else {\n        return prev + value;\n      }\n    });\n  };\n\n  // ←\n  const handleDelete = () => {\n    setCurrent(prev => prev.slice(0, -1));\n  };\n\n  // C\n  const handleAllClear = () => {\n    setCurrent(\"\");\n    setPrevious(\"\");\n  };\n\n  // 處理文字，取代 x 和 ÷\n  const handleReplaceText = (expression: string): string => {\n    let tempCurrent = expression;\n\n    if (tempCurrent.includes(\"x\")) {\n      tempCurrent = tempCurrent.replace(\"x\", \"*\");\n    } else if (tempCurrent.includes(\"÷\")) {\n      tempCurrent = tempCurrent.replace(\"÷\", \"/\");\n    }\n\n    return tempCurrent;\n  };\n\n  // =\n  const equals = () => {\n    if (current === \"\") return;\n\n    let sliceTempCurrent = current;\n\n    // 排除最後一個字非數字\n    if (isNaN(Number(sliceTempCurrent.slice(-1)))) {\n      sliceTempCurrent = String(current).slice(0, -1);\n    }\n\n    try {\n      const newPrevious = sliceTempCurrent + \"=\";\n      const total = eval(handleReplaceText(sliceTempCurrent)).toString();\n      setPrevious(newPrevious);\n      setCurrent(total);\n\n      // history\n      dispatch(saveExpression({ expression: newPrevious, total: total }));\n    } catch {\n      setPrevious(current + \"=\");\n      setCurrent(\"0\");\n    }\n  };\n\n  const btnClick = (btnItem: BtnType) => {\n    switch (btnItem.action) {\n      case BTN_ACTIONS.ADD:\n        return appendValue(btnItem.display);\n      case BTN_ACTIONS.DELETE:\n        return handleDelete();\n      case BTN_ACTIONS.CLEAN:\n        return handleAllClear();\n      case BTN_ACTIONS.CALC:\n        return equals();\n      default:\n        break;\n    }\n  };\n\n  // 鍵盤事件\n  const handleKeyDown = (event: KeyboardEvent) => {\n    const checkKeyDownBtn = Btns.findIndex((item: BtnType) => event.key === item.keydown);\n\n    if (checkKeyDownBtn === -1) return;\n    btnClick(Btns[checkKeyDownBtn]);\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      window.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [handleKeyDown]);\n\n  // copy expression\n  const copyTextToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text)\n      .then(() => {\n        setIsCopied(true);\n        setTimeout(() => {\n          setIsCopied(false);\n        }, 2000);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleCopy = (scope: number) => {\n    if (scope === CopyScope.Previous) {\n      copyTextToClipboard(previous + current);\n    } else if (scope === CopyScope.Current) {\n      copyTextToClipboard(current);\n    }\n  };\n\n  return (\n    <Container className=\"container \">\n      <Screen className=\"screen\" >\n        <Tool>\n          <ThemeButton onClick={() => dispatch(changeTheme())}>\n            <SunOne size=\"20px\" className={darkTheme ? undefined : \"action\"} />\n            <Moon size=\"20px\" className={darkTheme ? \"action\" : undefined} />\n          </ThemeButton>\n          <History size=\"20px\" onClick={() => setOpenHistoryList(true)} />\n        </Tool>\n        <Previous onClick={() => handleCopy(CopyScope.Previous)}>{previous}</Previous>\n        <Current className=\"current\" onClick={() => handleCopy(CopyScope.Current)}>\n          {current}\n        </Current>\n      </Screen>\n      <ButtonContainer>\n        {Btns.map((item, index) => (\n          <Button\n            aria-label={item.ariaLabel}\n            control={item.control}\n            gridSpan={item.gridSpan}\n            data={item.data}\n            operation={item.operation}\n            equals={item.equals}\n            onClick={() => btnClick(item)}\n            key={index}\n          >\n            {item.display}\n          </Button>\n        ))}\n      </ButtonContainer>\n      <HistoryList\n        OpenHistoryList={OpenHistoryList}\n        setOpenHistoryList={setOpenHistoryList}\n        setCurrent={setCurrent}\n        setPrevious={setPrevious}\n      />\n      <Message text={<><Copy /> Copied!</>} isCopied={isCopied} />\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { DeleteFour } from \"@icon-park/react\";\nimport { HistoryContainer, HistoryBlock, HistoryItem } from \"../../styled/Container\";\nimport { useAppDispatch, useAppSelector } from \"../../store/hook\";\nimport { cleanExpression, clickExpressionItem } from \"../../store/calculatorSlice\";\n\ninterface props {\n  OpenHistoryList: boolean;\n  setOpenHistoryList: React.Dispatch<React.SetStateAction<boolean>>;\n  setCurrent: React.Dispatch<React.SetStateAction<string>>;\n  setPrevious: React.Dispatch<React.SetStateAction<string>>;\n}\n\nconst HistoryList = ({ OpenHistoryList, setOpenHistoryList, setCurrent, setPrevious }: props) => {\n  const dispatch = useAppDispatch();\n  const { history } = useAppSelector((state) => state.calculator);\n\n  const CloseHistoryList = () => {\n    setOpenHistoryList(false);\n  };\n  const Stop = (e: React.MouseEvent<HTMLElement>) => {\n    e.stopPropagation();\n  };\n\n  const CleanHistoryList = () => {\n    dispatch(cleanExpression());\n  };\n\n  const CreateExpression = (item: historyType, idx: number) => {\n    setCurrent(item.total);\n    setPrevious(item.expression);\n\n    CloseHistoryList();\n    dispatch(clickExpressionItem(idx));\n\n  };\n\n  return (\n    <HistoryContainer show={OpenHistoryList} onClick={CloseHistoryList}>\n      <HistoryBlock onClick={Stop} className=\"slide-top\">\n        <DeleteFour size=\"20px\" onClick={CleanHistoryList} />\n        {history.map((item, idx) => {\n          return (\n            <HistoryItem key={idx} onClick={() => CreateExpression(item, idx)}>\n              <span>{item.expression}</span>\n              <span>{item.total}</span>\n            </HistoryItem>\n          );\n        })}\n\n      </HistoryBlock>\n    </HistoryContainer>\n  );\n};\n\nexport default HistoryList;\n","interface props {\n  text: JSX.Element;\n  isCopied: boolean\n}\nconst Message = ({ text, isCopied }: props) => {\n  return (\n    <div id=\"Message\"\n      className={isCopied ? \"show\" : undefined}\n    >\n      {text}\n    </div>\n  );\n};\n\nexport default Message;\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const Tool = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nexport const ThemeButton = styled.div`\n  background: var(--Button-Container);\n  border-radius: 10px;\n  > span {\n    display: inline-block;\n    padding: 8px 10px;\n\n    &:not(.action) {\n      opacity: 0.5;\n    }\n  }\n`;\n\nexport const Screen = styled.div`\n  flex: 1 0;\n  display: grid;\n  align-items: end;\n  grid-template-rows: 40px auto 50px;\n  gap: 1rem;\n  color: var(--Text);\n  font-weight: 500;\n  word-wrap: break-word; /*標明瀏覽器再單詞內進行斷行，防止字符串太長找不到他的自然斷句產生溢出*/\n  word-break: break-all; /*標明怎麼怎麼進行單詞內的斷句*/\n  text-align: right;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n`;\n\nexport const ExpressionHover = styled.div`\n  padding: 0 4px;\n  cursor: pointer;\n  \n  &:hover {\n    background-color: rgb(91 91 117 / 30%);\n    border-radius: 5px;\n  }\n`;\n\nexport const Previous = styled(ExpressionHover)`\n  color: var(--Previous);\n  font-size: 1.5rem;\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-end;\n`;\n\nexport const Current = styled(ExpressionHover)`\n  font-size: 2.5rem;\n`;\n\nexport const ButtonContainer = styled.div`\n  flex: 1.5 0;\n  display: grid;\n  justify-content: center;\n  align-content: center;\n  grid-template-columns: repeat(4, 1fr);\n  grid-template-rows: repeat(5, 1fr);\n  gap: 0.5rem;\n  padding: 1rem 1rem;\n  border-radius: 1.5rem 1.5rem 0 0;\n  background: var(--Button-Container);\n`;\n\nexport const Button = styled.button<{\n  gridSpan?: number;\n  data?: string;\n  operation?: boolean;\n  equals?: boolean;\n  control?: boolean;\n}>`\n  cursor: pointer;\n  font-size: 2rem;\n  border: none;\n  outline: none;\n  border-radius: 1.5rem;\n  font-weight: 500;\n  color: var(--Text);\n  background: transparent;\n  &:hover {\n    background-color: var(--Background);\n  }\n\n  /*EXPANDED FORM EXAMPLE 擴展表格JS*/\n  ${function ({ gridSpan }) {\n    if (gridSpan) {\n      return `grid-column: span ${gridSpan};`;\n    }\n  }}\n\n  /*上面簡化後變下面的*/\n  ${({ gridSpan }) => gridSpan && `grid-column: span ${gridSpan};`}\n  ${({ operation }) => operation && \"color: var(--Green)\"}\n  ${({ control }) => control && \"color: var(--Blue)\"}\n  ${({ equals }) => equals && \"background-color: var(--Background-Green);\"}\n`;\n\nexport const HistoryContainer = styled.div<{ show: boolean }>`\n  display: ${props => props.show ? \"inline-block\" : \"none\"};\n  position: absolute;\n  background-color: rgb(0 0 0 / 50%);\n  width: 100%;\n  height: 100%;\n`;\n\nexport const HistoryBlock = styled.div`\n  height: 80%;\n  width: 100%;\n  background: var(--Button-Container);\n  padding: 1rem;\n  overflow: auto;\n`;\n\nexport const HistoryItem = styled.div`\n  padding: 1rem 0;\n  text-align: right;\n\n  > span {\n    display: block;    \n  }\n\n  > span:first-child{\n    color: var(--Previous);\n    padding-bottom: 8px;\n  }\n`;","import { useEffect } from \"react\";\nimport Calculator from \"./page/Calculator\";\nimport { useAppSelector } from \"./store/hook\";\n\nfunction App() {\n  const { darkTheme } = useAppSelector((state) => state.calculator);\n\n  useEffect(() => {\n    if (darkTheme) {\n      document.body.classList.add(\"dark\");\n    } else {\n      document.body.classList.remove(\"dark\");\n    }\n  }, [darkTheme]);\n\n  return <Calculator />;\n}\n\nexport default App;\n","import { combineReducers } from \"@reduxjs/toolkit\";\nimport calculatorReducer from \"./calculatorSlice\";\n\nconst rootReducer = combineReducers({\n  calculator: calculatorReducer,\n});\n\nexport default rootReducer;\n","import { FLUSH, PAUSE, PERSIST, persistReducer, PURGE, REGISTER, REHYDRATE } from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport rootReducer from \"./rootReducer\";\n\nconst persistConfig = {\n  key: \"root\",\n  storage,\n  whitelist: [\"calculator\"],\n};\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer);\n\nconst store = configureStore({\n  reducer: persistedReducer,\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n      },\n    })\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\nexport default store;\n","const Footer = () => {\n  return (\n    <footer>\n      <p>\n        Made by @\n        <a href=\"https://github.com/MeganxLi\">\n          Megan Lee\n        </a>\n      </p>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import { createRoot } from \"react-dom/client\";\nimport { Provider } from \"react-redux\";\nimport { persistStore } from \"redux-persist\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport \"./styles/App.scss\";\nimport App from \"./App\";\nimport store from \"./store\";\nimport Footer from \"./components/Footer\";\n\nconst container = document.getElementById(\"root\") as HTMLElement;\nconst root = createRoot(container);\n\nconst persistor = persistStore(store);\n\nroot.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <App />\n      <Footer />\n    </PersistGate>\n  </Provider>\n);\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"..\";\n\nexport const useAppDispatch: () => AppDispatch = useDispatch;\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n"],"sourceRoot":""}